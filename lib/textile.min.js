!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("textile",[],t):"object"==typeof exports?exports.textile=t():e.textile=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e,t){return t=s(s({},r.defaults),t||{}),l(e,t,t.lineOffset).map(i).join("")}var s=n(1),a=n(2),i=a.toHTML,c=n(6),l=c.parseFlow,o=n(3),u=o.parseHtml;e.exports=r,r.defaults={breaks:!0,showOriginalLineNumber:!1,lineOffset:0,cssClassOriginalLineNumber:""},r.setOptions=r.setoptions=function(e){return s(r.defaults,e),this},r.parse=r.convert=r,r.html_parser=u,r.jsonml=function(e,t){return t=s(s({},r.defaults),t||{}),["html"].concat(l(e,t,t.lineOffset))},r.serialize=i},function(e,t){"use strict";e.exports=function(e,t){if(t)for(var n in t)e[n]=t[n];return e}},function(e,t,n){"use strict";function r(e,t){return t?e.map(function(e){if(/^\n\t+/.test(e))if(t<0)e=e.slice(0,t);else for(var n=0;n<t;n++)e+="\t";else if(Array.isArray(e))return r(e,t);return e}):e}function s(e,t){return e.replace(/&(?!(#\d{2,}|#x[\da-fA-F]{2,}|[a-zA-Z][a-zA-Z1-4]{1,6});)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,t?"&quot;":'"').replace(/'/g,t?"&#39;":"'")}function a(e){if(e=e.concat(),"string"==typeof e)return s(e);var t=e.shift(),n={},r="",l=[];for(e.length&&"object"===i(e[0])&&!Array.isArray(e[0])&&(n=e.shift());e.length;)l.push(a(e.shift()));for(var o in n)r+=null==n[o]?" "+o:" "+o+'="'+s(String(n[o]),!0)+'"';return"!"===t?"<!--"+l.join("")+"-->":t in c||t.indexOf(":")>-1&&!l.length?"<"+t+r+" />":"<"+t+r+">"+l.join("")+"</"+t+">"}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(3).singletons;e.exports={reIndent:r,toHTML:a,escape:s}},function(e,t,n){"use strict";function r(){return!0}function s(e){return h.exec(e)}function a(e){return m.exec(e)}function i(e){return v.exec(e)}function c(e){return g.exec(e)}function l(e){for(var t={},n=void 0;n=d.exec(e);)t[n[1]]="string"==typeof n[2]?n[2].replace(/^(["'])(.*)\1$/,"$2"):null,e=e.slice(n[0].length);return t}function o(e,t,n){var a=[],o=!1,u=t?function(e){return e in t}:r,p=u,d={},h=0,g=void 0;e=f(String(e));do if((g=s(e))&&u("!"))a.push({type:A,data:g[1],pos:e.index(),src:g[0]}),e.advance(g[0]);else if((g=c(e))&&u(g[1])){var v={type:y,tag:g[1],pos:e.index(),src:g[0]};if(e.advance(g[0]),a.push(v),d[v.tag]--,h--,n&&(!h||!d[v.tag]<0||isNaN(d[v.tag])))return a;o&&(o=null,u=p)}else if((g=i(e))&&u(g[1])){var m={type:g[3]||g[1]in x?$:b,tag:g[1],pos:e.index(),src:g[0]};g[2]&&(m.attr=l(g[2])),"script"!==g[1]&&"code"!==g[1]&&"style"!==g[1]||(o=m.tag,u=function(e){return e===o}),m.type===b&&(h++,d[m.tag]=(d[m.tag]||0)+1),a.push(m),e.advance(g[0])}else g=/([^<]+|[^\0])/.exec(e),g&&a.push({type:S,data:g[0],pos:e.index(),src:g[0]}),e.advance(g?g[0].length||1:1);while(e.valueOf());return a}function u(e,t){for(var n=[],r=[],s=n,a=void 0,i=0;i<e.length;i++)if(a=e[i],a.type===A)s.push(["!",a.data]);else if(a.type===S||a.type===L)s.push(a.data);else if(a.type===$)s.push(a.attr?[a.tag,a.attr]:[a.tag]);else if(a.type===b){var c=a.attr?[a.tag,a.attr]:[a.tag];s.push(c),r.push(c),s=c}else if(a.type===y){if(r.length)for(var l=r.length-1;l>=0;l--){var o=r[l];if(o[0]===a.tag){r.splice(l),s=r[r.length-1]||n;break}}if(!r.length&&t)return n.sourceLength=a.pos+a.src.length,n}return n.sourceLength=a?a.pos+a.src.length:0,n}var p=n(4),f=n(5);p.pattern.html_id="[a-zA-Z][a-zA-Z\\d:]*",p.pattern.html_attr="(?:\"[^\"]+\"|'[^']+'|[^>\\s]+)";var d=p.compile(/^\s*([^=\s]+)(?:\s*=\s*("[^"]+"|'[^']+'|[^>\s]+))?/),h=p.compile(/^<!--(.+?)-->/,"s"),g=p.compile(/^<\/([:html_id:])([^>]*)>/),v=p.compile(/^<([:html_id:])((?:\s[^=\s\/]+(?:\s*=\s*[:html_attr:])?)+)?\s*(\/?)>/),m=p.compile(/^\s*<([:html_id:](?::[a-zA-Z\d]+)*)((?:\s[^=\s\/]+(?:\s*=\s*[:html_attr:])?)+)?\s*(\/?)>/),x={area:1,base:1,br:1,col:1,embed:1,hr:1,img:1,input:1,link:1,meta:1,option:1,param:1,wbr:1},b="OPEN",y="CLOSE",$="SINGLE",S="TEXT",A="COMMENT",L="WS";e.exports={singletons:x,tokenize:o,parseHtml:u,parseHtmlAttr:l,testCloseTag:c,testOpenTagBlock:a,testOpenTag:i,testComment:s}},function(e,t){"use strict";var n={},r=e.exports={pattern:{punct:"[!-/:-@\\[\\\\\\]-`{-~]",space:"\\s"},escape:function(e){return e.replace(/[\-\[\]\{\}\(\)\*\+\?\.,\\\^\$\|#\s]/g,"\\$&")},collapse:function(e){return e.replace(/(?:#.*?(?:\n|$))/g,"").replace(/\s+/g,"")},expandPatterns:function(e){return e.replace(/\[:\s*(\w+)\s*:\]/g,function(t,n){var s=r.pattern[n];if(s)return r.expandPatterns(s);throw new Error("Pattern "+t+" not found in "+e)})},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},compile:function(e,t){r.isRegExp(e)&&(1===arguments.length&&(t=(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")),e=e.source);var s=e+(t||"");if(s in n)return n[s];var a=r.expandPatterns(e);return t&&/x/.test(t)&&(a=r.collapse(a)),t&&/s/.test(t)&&(a=a.replace(/([^\\])\./g,"$1[^\\0]")),t=(t||"").replace(/[^gim]/g,""),n[s]=new RegExp(a,t)}}},function(e,t){"use strict";e.exports=function(e){var t=String(e),n=void 0,r=0,s={index:function(){return r},save:function(){return n=r,s},getSlot:function(){return n||0},getPos:function(){return r||0},load:function(){return r=n,e=t.slice(r),s},advance:function(n){return r+="string"==typeof n?n.length:n,e=t.slice(r)},skipWS:function(){var n=/^\s+/.exec(e);return n?(r+=n[0].length,e=t.slice(r),n[0]):""},lookbehind:function(e){return e=null==e?1:e,t.slice(r-e,r)},startsWith:function(t){return e.substring(0,t.length)===t},slice:function(t,n){return null!=n?e.slice(t,n):e.slice(t)},valueOf:function(){return e},toString:function(){return e}};return s}},function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var s=1;s<n.length;s++){var a=n[s];if(null!=a)for(var i in a)J.call(a,i)&&(e[i]=a[i])}return e}function s(e,t,n,r,s){t=t||"p";var a=[];return e.split(/(?:\r?\n){2,}/).forEach(function(e,i){"p"===t&&/^\s/.test(e)?(e=e.replace(/\r?\n[\t ]/g," ").trim(),a=a.concat(y(e,s))):(r&&i&&a.push(r),a.push(n?[t,n].concat(y(e,s)):[t].concat(y(e,s))))}),a}function a(e,t,n){if(t.showOriginalLineNumber){n=n||0;var r=e.match(X);return r&&r[0]&&(n+=(r[0].match(/\n/g)||[]).length),n}return 0}function i(e,t,n){if(t.showOriginalLineNumber){var r=[],s=e.toString();for(var a in s)r[a]=n,"\n"===s[a]&&n++;return r}}function c(e,t,n){var u=l(),f=void 0,b=void 0,$=a(e,t,n);e=o(e.replace(X,""));for(var O=i(e,t,$);e.valueOf();)if(e.save(),b=G.exec(e))f||(f={}),e.advance(b[0]),f[b[1]]=b[2];else{if(u.linebreak(),b=Z.exec(e)){e.advance(b[0]);var _=b[0],T=A(e,_);if(T&&(e.advance(T[0]),T=T[1]),T=L(T,t,O,0,e.getSlot()),b=/^\.(\.?)(?:\s|(?=:))/.exec(e)){var W=!!b[1],C=W?R:q;if("bc"!==_&&"pre"!==_||(C=W?F:D),b=C.exec(e.advance(b[0])),e.advance(b[0]),"bq"===_){var z=b[1];(b=/^:(\S+)\s+/.exec(z))&&(T||(T={}),T.cite=b[1],z=z.slice(b[0].length));var H=s(z,"p",S(T,{cite:1,id:1}),"\n",t);u.add(["blockquote",T,"\n"].concat(H).concat(["\n"]))}else if("bc"===_){var J=T?S(T,{id:1}):null;u.add(["pre",T,J?["code",J,b[1]]:["code",b[1]]])}else if("notextile"===_)u.merge(d(h(b[1])));else if("###"===_);else if("pre"===_)u.add(["pre",T,b[1]]);else if(B.test(_)){var K=_.replace(/\D+/g,"");T||(T={}),T.class=(T.class?T.class+" ":"")+"footnote",T.id="fn"+K,u.add(["p",T,["a",{href:"#fnr"+K},["sup",K]]," "].concat(y(b[1],t)))}else u.merge(s(b[1],_,T,"\n",t));continue}e.load()}if(b=m(e))e.advance(b[0]+(/(?:\s*\n+)+/.exec(e)||[])[0]),u.add(["!",b[1]]);else{if(b=x(e)){var Q=b[1];if(Q in M)if(b[3]||Q in v){if(e.advance(b[0]),/^\s*(\n|$)/.test(e)){var U=[Q];b[2]&&U.push(g(b[2])),u.add(U),e.skipWS();continue}}else if("pre"===Q){var V=h(e,{pre:1,code:1},Q),Y=d(V,!0);if(e.load().advance(Y.sourceLength),/^\s*(\n|$)/.test(e)){u.merge(Y),e.skipWS();continue}}else if("notextile"===Q){for(var ee=h(e,null,Q),te=1;/^\s+$/.test(ee[te].src);)te++;var ne=d(ee.slice(te,-1),!0),re=ee.pop();if(e.load().advance(re.pos+re.src.length),/^\s*(\n|$)/.test(e)){u.merge(ne),e.skipWS();continue}}else{e.skipWS();for(var se=h(e,null,Q),ae=se.pop(),ie=1;se[ie]&&/^[\n\r]+$/.test(se[ie].src);)ie++;if(ae.tag===Q){var ce=se.length>1?e.slice(se[ie].pos,ae.pos):"";if(e.advance(ae.pos+ae.src.length),/^\s*(\n|$)/.test(e)){var le=[Q];if(b[2]&&le.push(g(b[2])),"script"===Q||"style"===Q)le.push(ce);else{var oe=ce.replace(/^\n+/,"").replace(/\s*$/,""),ue=/\n\r?\n/.test(oe)||"ol"===Q||"ul"===Q,pe=ue?c(oe,t):y(oe,r({},t,{breaks:!1}));(ue||/^\n/.test(ce))&&le.push("\n"),(ue||/\s$/.test(ce))&&pe.push("\n"),le=le.concat(pe)}u.add(le),e.skipWS();continue}}}e.load()}(b=I.exec(e))?(e.advance(b[0]),u.add(["hr"])):(b=w(e))?(e.advance(b[0]),u.add(k(b[0],t,e.getSlot(),O))):(b=N(e))?(e.advance(b[0]),u.add(P(b[0],t,e.getSlot(),O))):(b=j(e))?(e.advance(b[0]),u.add(E(b[1],t,e.getSlot(),O))):(b=q.exec(e),u.merge(s(b[1],"p",L({},t,O,0,e.getSlot()),"\n",t)),e.advance(b[0]))}}return f?p(u.get(),f):u.get()}var l=n(7),o=n(5),u=n(4),p=n(8),f=n(3),d=f.parseHtml,h=f.tokenize,g=f.parseHtmlAttr,v=f.singletons,m=f.testComment,x=f.testOpenTagBlock,b=n(9),y=b.parsePhrase,$=n(10),S=$.copyAttr,A=$.parseAttr,L=$.addLineNumber,O=n(13),w=O.testList,k=O.parseList,_=n(14),N=_.testDefList,P=_.parseDefList,T=n(15),j=T.testTable,E=T.parseTable,W=n(12),C=W.txblocks,z=W.txlisthd,H=W.txattr;u.pattern.txblocks=C,u.pattern.txlisthd=z,u.pattern.txattr=H;var M={p:0,hr:0,ul:1,ol:0,li:0,div:1,pre:0,object:1,script:0,noscript:0,blockquote:1,notextile:1},Z=u.compile(/^([:txblocks:])/),q=u.compile(/^(.*?)($|\r?\n(?=[:txlisthd:])|\r?\n(?:\s*\n|$)+)/,"s"),R=u.compile(/^(.*?)($|\r?\n(?=[:txlisthd:])|\r?\n+(?=[:txblocks:][:txattr:]\.))/,"s"),D=u.compile(/^(.*?)($|\r?\n(?:\s*\n|$)+)/,"s"),F=u.compile(/^(.*?)($|\r?\n+(?=[:txblocks:][:txattr:]\.))/,"s"),I=/^(\-\-\-+|\*\*\*+|___+)(\r?\n\s+|$)/,G=u.compile(/^\[([^\]]+)\]((?:https?:\/\/|\/)\S+)(?:\s*\n|$)/),B=/^fn\d+$/,X=/^( *\r?\n)+/,J=Object.prototype.hasOwnProperty;t.parseFlow=c},function(e,t){"use strict";e.exports=function(e){var t=Array.isArray(e)?e:[];return{add:function(e){return"string"==typeof e&&"string"==typeof t[t.length-1]?t[t.length-1]+=e:Array.isArray(e)?t.push(e.filter(function(e){return void 0!==e})):e&&t.push(e),this},merge:function(e){for(var t=0,n=e.length;t<n;t++)this.add(e[t]);return this},linebreak:function(){t.length&&this.add("\n")},get:function(){return t}}}},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function e(t,r){if(Array.isArray(t)){if("a"===t[0]){var s=t[1];"object"===("undefined"==typeof s?"undefined":n(s))&&"href"in s&&s.href in r&&(s.href=r[s.href])}for(var a=0,i=t.length;a<i;a++)Array.isArray(t[a])&&e(t[a],r)}return t}},function(e,t,n){"use strict";function r(e,t){e=s(e);var n=a(),c=void 0,o=void 0;do if(e.save(),e.startsWith("\r\n")&&e.advance(1),e.startsWith("\n"))e.advance(1),e.startsWith(" ")?e.advance(1):t.breaks&&n.add(["br"]),n.add("\n");else if(c=/^==(.*?)==/.exec(e))e.advance(c[0]),n.add(c[1]);else{var p=e.lookbehind(1),x=!p||/^[\s>.,"'?!;:()]$/.test(p);if((c=A.exec(e))&&(x||c[1])){e.advance(c[0]);var b=c[2],y=c[1],$=S[b],T="code"===$;(o=!T&&l(e,$,b))&&(e.advance(o[0]),o=o[1]);var j=void 0,E=void 0;if("["===y)j="^(.*?)",E="(?:])";else if("{"===y)j="^(.*?)",E="(?:})";else{var W=i.escape(b.charAt(0));j=T?"^(\\S+|\\S+.*?\\S)":"^([^\\s"+W+"]+|[^\\s"+W+"].*?\\S("+W+"*))",E="(?=$|[\\s.,\"'!?;:()«»„“”‚‘’])"}var C=i.compile(j+"("+i.escape(b)+")"+E);if((c=C.exec(e))&&c[1]){e.advance(c[0]),T?n.add([$,c[1]]):n.add([$,o].concat(r(c[1],t)));continue}e.load()}if((c=L.exec(e))||(c=O.exec(e))){e.advance(c[0]),o=c[1]&&l(c[1],"img");var z=o?o[1]:{src:""},H=["img",z];z.src=c[2],z.alt=c[3]?z.title=c[3]:"",c[4]&&(H=["a",{href:c[4]},H]),n.add(H)}else if(c=v(e))e.advance(c[0]),n.add(["!",c[1]]);else{if(c=m(e)){e.advance(c[0]);var M=c[1],Z=c[3]||c[1]in g,q=[M];if(c[2]&&q.push(d(c[2])),Z){n.add(q).add(e.skipWS());continue}var R=i.compile("^(.*?)(</"+M+"\\s*>)","s");if(c=R.exec(e)){if(e.advance(c[0]),"code"===M)q.push(c[1]);else{if("notextile"===M){n.merge(f(h(c[1])));continue}q=q.concat(r(c[1],t))}n.add(q);continue}e.load()}if((c=P.exec(e))&&/\S/.test(p))e.advance(c[0]),n.add(["sup",{class:"footnote",id:"fnr"+c[1]},"!"===c[2]?c[1]:["a",{href:"#fn"+c[1]},c[1]]]);else if(c=w.exec(e)){e.advance(c[0]);var D=["span",{class:"caps"},c[1]];c[2]&&(D=["acronym",{title:c[2]},D]),n.add(D)}else if(x&&(c=k.exec(e))||(c=_.exec(e))){e.advance(c[0]);var F=c[1].match(N),I=F?c[1].slice(0,c[1].length-F[0].length):c[1];(o=l(I,"a"))?(I=I.slice(o[0]),o=o[1]):o={},F&&!I&&(I=F[0],F=""),o.href=c[2],F&&(o.title=F[1]),n.add(["a",o].concat(r(I.replace(/^(\.?\s*)/,""),t)))}else c=/([a-zA-Z0-9,.':]+|[ \f\r\t\v\xA0\u2028\u2029]+|[^\0])/.exec(e),c&&n.add(c[0]),e.advance(c?c[0].length||1:1)}}while(e.valueOf());return n.get().map(u)}var s=n(5),a=n(7),i=n(4),c=n(10),l=c.parseAttr,o=n(11),u=o.parseGlyph,p=n(3),f=p.parseHtml,d=p.parseHtmlAttr,h=p.tokenize,g=p.singletons,v=p.testComment,m=p.testOpenTag,x=n(12),b=x.ucaps,y=x.txattr,$=x.txcite;i.pattern.txattr=y,i.pattern.txcite=$,i.pattern.ucaps=b;var S={"*":"strong","**":"b","??":"cite",_:"em",__:"i","-":"del","%":"span","+":"ins","~":"sub","^":"sup","@":"code"},A=/^([\[\{]?)(__?|\*\*?|\?\?|[\-\+\^~@%])/,L=i.compile(/^!(?!\s)([:txattr:](?:\.[^\n\S]|\.(?:[^\.\/]))?)([^!\s]+?) ?(?:\(((?:[^\(\)]|\([^\(\)]+\))+)\))?!(?::([^\s]+?(?=[!-\.:-@\[\\\]-`{-~](?:$|\s)|\s|$)))?/),O=i.compile(/^\[!(?!\s)([:txattr:](?:\.[^\n\S]|\.(?:[^\.\/]))?)([^!\s]+?) ?(?:\(((?:[^\(\)]|\([^\(\)]+\))+)\))?!(?::([^\s]+?(?=[!-\.:-@\[\\\]-`{-~](?:$|\s)|\s|$)))?\]/),w=i.compile(/^((?!TM\)|tm\))[[:ucaps:]](?:[[:ucaps:]\d]{1,}(?=\()|[[:ucaps:]\d]{2,}))(?:\((.*?)\))?(?=\W|$)/),k=i.compile(/^"(?!\s)((?:[^"]|"(?![\s:])[^\n"]+"(?!:))+)"[:txcite:]/),_=/^\["([^\n]+?)":((?:\[[a-z0-9]*\]|[^\]])+)\]/,N=/\s*\(((?:\([^\(\)]*\)|[^\(\)])+)\)$/,P=/^\[(\d+)(!?)\]/;t.parsePhrase=r},function(e,t){"use strict";function n(e,t){if(e){var n={};for(var r in e)!(r in e)||t&&r in t||(n[r]=e[r]);return n}}function r(e){return/^(?:table|t[dh]|t(?:foot|head|body)|b[qc]|div|notextile|pre|h[1-6]|fn\\d+|p|###)$/.test(e)}function s(e,t,n){if(e=String(e),e&&"notextile"!==t){var s=void 0,a={},b={style:a},y=e,$=r(t),S="img"===t,A="li"===t,L=!$&&!S&&"a"!==t,O=S?u:o;do if(s=h.exec(y))s[1].split(";").forEach(function(e){var t=e.match(g);t&&(a[t[1]]=t[2])}),y=y.slice(s[0].length);else if(s=v.exec(y)){var w=y.slice(s[0].length);!w&&L||n&&n===w.slice(0,n.length)?s=null:(b.lang=s[1],y=y.slice(s[0].length))}else if(s=i.exec(y)){var k=y.slice(s[0].length);if(!k&&L||n&&(" "===k[0]||n===k.slice(0,n.length)))s=null;else{var _=s[1].split("#");_[0]&&(b.class=_[0]),_[1]&&(b.id=_[1]),y=k}}else{if($||A){if(s=c.exec(y)){a["padding-left"]=s[1].length+"em",y=y.slice(s[0].length);continue}if(s=l.exec(y)){a["padding-right"]=s[1].length+"em",y=y.slice(s[0].length);continue}}if((S||$||A)&&(s=O.exec(y))){var N=m[s[1]];S?b.align=N:a["text-align"]=N,y=y.slice(s[0].length)}else if("td"!==t&&"tr"!==t||!(s=p.exec(y))){if("td"===t){if(s=f.exec(y)){b.colspan=s[1],y=y.slice(s[0].length);continue}if(s=d.exec(y)){b.rowspan=s[1],y=y.slice(s[0].length);continue}}}else a["vertical-align"]=x[s[1]],y=y.slice(s[0].length)}while(s);var P=[];for(var T in a)P.push(T+":"+a[T]);return P.length?b.style=P.join(";"):delete b.style,y===e?void 0:[e.length-y.length,b]}}function a(e,t,n,r,s){return t.showOriginalLineNumber&&n&&(r=r||0,e||(e={}),e["data-line"]=n[r+s],t.cssClassOriginalLineNumber&&(e.class=(e.class?e.class+" ":"")+t.cssClassOriginalLineNumber)),e}var i=/^\(([^\(\)\n]+)\)/,c=/^(\(+)/,l=/^(\)+)/,o=/^(<>|<|>|=)/,u=/^(<|>|=)/,p=/^(~|\^|\-)/,f=/^\\(\d+)/,d=/^\/(\d+)/,h=/^\{([^\}]*)\}/,g=/^\s*([^:\s]+)\s*:\s*(.+)\s*$/,v=/^\[([^\[\]\n]+)\]/,m={"<":"left","=":"center",">":"right","<>":"justify"},x={"~":"bottom","^":"top","-":"middle"};e.exports={copyAttr:n,parseAttr:s,addLineNumber:a}},function(e,t,n){"use strict";var r=n(4),s=/(\w)'(\w)/g,a=/([^\-]|^)->/,i=r.compile(/([^\s\[\(])"(?=$|\s|[:punct:])/g),c=r.compile(/([^\s\[\(])'(?=$|\s|[:punct:])/g),l=/(\b ?|\s|^)(?:\(C\)|\[C\])/gi,o=/([\d\.,]+['"]? ?)x( ?)(?=[\d\.,]['"]?)/g,u=r.compile(/(\d*[\.,]?\d+)"(?=\s|$|[:punct:])/g),p=/([^.]?)\.{3}/g,f=/(^|[\s\w])--([\s\w]|$)/g,d=/ - /g,h=/"/g,g=/'/g,v=/(\b ?|\s|^)(?:\(R\)|\[R\])/gi,m=r.compile(/(\d*[\.,]?\d+)'(?=\s|$|[:punct:])/g),x=/(\b ?|\s|^)(?:\((?:TM|tm)\)|\[(?:TM|tm)\])/g;t.parseGlyph=function(e){return"string"!=typeof e?e:e.replace(a,"$1&#8594;").replace(o,"$1&#215;$2").replace(p,"$1&#8230;").replace(f,"$1&#8212;$2").replace(d," &#8211; ").replace(x,"$1&#8482;").replace(v,"$1&#174;").replace(l,"$1&#169;").replace(u,"$1&#8243;").replace(i,"$1&#8221;").replace(h,"&#8220;").replace(m,"$1&#8242;").replace(s,"$1&#8217;$2").replace(c,"$1&#8217;").replace(g,"&#8216;").replace(/[\(\[]1\/4[\]\)]/,"&#188;").replace(/[\(\[]1\/2[\]\)]/,"&#189;").replace(/[\(\[]3\/4[\]\)]/,"&#190;").replace(/[\(\[]o[\]\)]/,"&#176;").replace(/[\(\[]\+\/\-[\]\)]/,"&#177;")}},function(e,t){"use strict";t.txblocks="(?:b[qc]|div|notextile|pre|h[1-6]|fn\\d+|p|###)",t.ucaps="A-ZÀ-ÖØ-ÞĀĂĄĆĈĊČĎĐĒĔĖĘĚĜĞĠĢĤĦĨĪĬĮİĲĴĶĹĻĽĿŁŃŅŇŊŌŎŐŒŔŖŘŚŜŞŠŢŤŦŨŪŬŮŰŲŴŶŸŹŻŽƁƂƄƆƇƉ-ƋƎ-ƑƓƔƖ-ƘƜƝƟƠƢƤƦƧƩƬƮƯƱ-ƳƵƷƸƼǄǇǊǍǏǑǓǕǗǙǛǞǠǢǤǦǨǪǬǮǱǴǶ-ǸǺǼǾȀȂȄȆȈȊȌȎȐȒȔȖȘȚȜȞȠȢȤȦȨȪȬȮȰȲȺȻȽȾɁɃ-ɆɈɊɌɎḀḂḄḆḈḊḌḎḐḒḔḖḘḚḜḞḠḢḤḦḨḪḬḮḰḲḴḶḸḺḼḾṀṂṄṆṈṊṌṎṐṒṔṖṘṚṜṞṠṢṤṦṨṪṬṮṰṲṴṶṸṺṼṾẀẂẄẆẈẊẌẎẐẒẔẞẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼẾỀỂỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪỬỮỰỲỴỶỸỺỼỾⱠⱢ-ⱤⱧⱩⱫⱭ-ⱰⱲⱵⱾⱿꜢꜤꜦꜨꜪꜬꜮꜲꜴꜶꜸꜺꜼꜾꝀꝂꝄꝆꝈꝊꝌꝎꝐꝒꝔꝖꝘꝚꝜꝞꝠꝢꝤꝦꝨꝪꝬꝮꝹꝻꝽꝾꞀꞂꞄꞆꞋꞍꞐꞒꞠꞢꞤꞦꞨꞪ",t.txcite=":((?:[^\\s()]|\\([^\\s()]+\\)|[()])+?)(?=[!-\\.:-@\\[\\\\\\]-`{-~]+(?:$|\\s)|$|\\s)";var n=t.attr_class="\\([^\\)]+\\)",r=t.attr_style="\\{[^\\}]+\\}",s=t.attr_lang="\\[[^\\[\\]]+\\]",a=t.attr_align="(?:<>|<|>|=)",i=t.attr_pad="[\\(\\)]+",c=t.txattr="(?:"+n+"|"+r+"|"+s+"|"+a+"|"+i+")*";t.txlisthd="[\\t ]*[\\#\\*]*(\\*|\\#(?:_|\\d+)?)"+c+"(?: +\\S|\\.\\s*(?=\\S|\\n))"},function(e,t,n){"use strict";function r(e){for(var t="\n";e--;)t+="\t";return t}function s(e){return v.exec(e)}function a(e,t,n,s){if(t.showOriginalLineNumber){var a=e.match(/(^|\r?\n)[\t ]+/);a&&a[0]&&n++}e=i(e.replace(/(^|\r?\n)[\t ]+/,"$1"));for(var c=[],o={},f=t._lst||{},h=0,g=void 0,v=void 0,x=void 0,b=void 0;v=m.exec(e);){var y=["li"],$=v[1].length,S="#"===v[1].substr(-1)?"ol":"ul",A=null,L=void 0,O=void 0,w=void 0,k=void 0;if((x=/^(_|\d+)/.exec(v[2]))&&(h=isFinite(x[1])?parseInt(x[1],10):f[$]||o[$]||1,v[2]=v[2].slice(x[1].length)),(w=u(v[2],"li"))&&(v[2]=v[2].slice(w[0]),w=w[1]),w=p(w,t,s,n,e.getPos()),/^\.\s*$/.test(v[2]))g=w||{},e.advance(v[0]);else{for(;c.length<$;)L=[S,{},r(c.length+1),A=["li"]],O=c[c.length-1],O&&(O.li.push(r(c.length)),O.li.push(L)),c.push({ul:L,li:A,att:0}),o[c.length]=1;for(;c.length>$;)k=c.pop(),k.ul.push(r(c.length)),1!==k.att||k.ul[3][1].substr||l(k.ul[1],k.ul[3].splice(1,1)[0]);O=c[c.length-1],h&&(O.ul[1].start=h,o[$]=h,h=0),g&&(O.att=9,l(O.ul[1],g),g=null),A||(O.ul.push(r(c.length),y),O.li=y),w&&(O.li.push(w),O.att++),Array.prototype.push.apply(O.li,d(v[2].trim(),t)),e.advance(v[0]),o[$]=(o[$]||0)+1}}for(t._lst=o;c.length;)b=c.pop(),b.ul.push(r(c.length)),1!==b.att||b.ul[3][1].substr||l(b.ul[1],b.ul[3].splice(1,1)[0]);return b.ul}var i=n(5),c=n(4),l=n(1),o=n(10),u=o.parseAttr,p=o.addLineNumber,f=n(9),d=f.parsePhrase,h=n(12),g=h.txlisthd;c.pattern.txlisthd=g;var v=c.compile(/^((?:[:txlisthd:][^\0]*?(?:\r?\n|$))+)(\s*\n|$)/,"s"),m=c.compile(/^([#\*]+)([^\0]+?)(\n(?=[:txlisthd:])|$)/,"s");e.exports={testList:s,parseList:a}},function(e,t,n){"use strict";function r(e){return l.exec(e)}function s(e,t,r,s){if(t.showOriginalLineNumber){var i=e.match(/^\s+/);i&&i[0]&&(r+=i[0].length)}e=a(e.trim());for(var l=n(9).parsePhrase,u=n(6).parseFlow,p=["dl","\n"],f=void 0,d=void 0,h=void 0;h=o.exec(e);){f=h[1].split(/(?:^|\n)\- /);var g=f[0].length;f=f.slice(1);var v=[];for(t.showOriginalLineNumber&&(v=h[1].match(/(?:^|\n)\- /g).slice(1));f.length;){var m=f.shift();p.push("\t",["dt"].concat(c({},t,s,r,e.getPos()+g),l(m.trim(),t)),"\n"),t.showOriginalLineNumber&&(g+=m.length,v.length&&(g+=v.shift().length))}if(d=h[2].trim(),t.showOriginalLineNumber){g=h[1].length+2;var x=h[2].match(/^\s+/);x&&x[0]&&(g+=x[0].length)}p.push("\t",["dd"].concat(c({},t,s,r,e.getPos()+g),/=:$/.test(d)?u(d.slice(0,-2).trim(),t,t.showOriginalLineNumber?s[(r||0)+g+e.getPos()]:0):l(d,t)),"\n"),e.advance(h[0])}return p}var a=n(5),i=n(10),c=i.addLineNumber,l=/^((?:- (?:[^\n]\n?)+?)+:=(?: *\n[^\0]+?=:(?:\n|$)|(?:[^\0]+?(?:$|\n(?=\n|- )))))+/,o=/^((?:- (?:[^\n]\n?)+?)+):=( *\n[^\0]+?=:\s*(?:\n|$)|(?:[^\0]+?(?:$|\n(?=\n|- ))))/;t.testDefList=r,t.parseDefList=s},function(e,t,n){"use strict";function r(e){var t=["colgroup",{}];return e.split("|").forEach(function(e,n){var r=n?{}:t[1],s=e.trim(),a=void 0;s&&((a=/^\\(\d+)/.exec(s))&&(r.span=+a[1],s=s.slice(a[0].length)),(a=u(s,"col"))&&(c(r,a[1]),s=s.slice(a[0])),(a=/\b\d+\b/.exec(s))&&(r.width=+a[0])),n&&t.push("\n\t\t",["col",r])}),t.concat(["\n\t"])}function s(e){return x.exec(e)}function a(e,t,n,s){if(t.showOriginalLineNumber){var a=e.match(/^\s+/);a&&a[0]&&(n+=a[0].length)}e=l(e.trim());var i=[],o=void 0,f=void 0,h={},v=void 0,m=void 0,x=void 0,O=void 0,w=void 0,k=void 0,_=0,N=function(e,t){v=[e,t||{}],i.push(v)};(k=b.exec(e))&&(e.advance(k[0]),O=u(k[2],"table"),O&&c(h,O[1]),k[3]&&(h.summary=k[3])),(k=$.exec(e))&&(f=["caption"],(O=u(k[1],"caption"))&&(f.push(O[1]),k[1]=k[1].slice(O[0])),/\./.test(k[1])?(f.push(k[1].slice(1).replace(/\|\s*$/,"").trim()),_++,e.advance(k[0])):f=null);do{if(k=S.exec(e))o=r(k[1]),_++;else if(k=A.exec(e)){var P=L[k[1]]||"tbody";O=u(k[2]+" ",P),N(P,O&&O[1]),_++}else if(k=y.exec(e)){v||N("tbody"),m=["tr"],k[2]&&(O=u(k[2],"tr"))?m.push(p(O[1],t,s,n,e.getPos())):m.push(p({},t,s,n,e.getPos())),v.push("\n\t\t",m),x=l(k[3]);do{x.save();var T=x.startsWith("_"),j=[T?"th":"td"];if(T&&x.advance(1),O=u(x,"td"),O&&(x.advance(O[0]),j.push(O[1])),O||T){var E=/^\.\s*/.exec(x);E?x.advance(E[0]):(j=["td"],x.load())}var W=/^(==.*?==|[^\|])*/.exec(x);j=j.concat(d(W[0],t)),m.push("\n\t\t\t",j),w="|"===x.valueOf().charAt(W[0].length),x.advance(W[0].length+1)}while(w);m.push("\n\t\t")}k&&e.advance(k[0])}while(k);var C=["table",h];return _?(f&&C.push("\n\t",f),o&&C.push("\n\t",o),i.forEach(function(e){C.push("\n\t",e.concat(["\n\t"]))})):C=C.concat(g(i[0].slice(2),-1)),C.push("\n"),C}var i=n(4),c=n(1),l=n(5),o=n(10),u=o.parseAttr,p=o.addLineNumber,f=n(9),d=f.parsePhrase,h=n(2),g=h.reIndent,v=n(12),m=v.txattr;i.pattern.txattr=m;var x=i.compile(/^((?:table[:txattr:]\.(?:\s(.+?))\s*\n)?(?:(?:[:txattr:]\.[^\n\S]*)?\|.*?\|[^\n\S]*(?:\n|$))+)([^\n\S]*\n)?/,"s"),b=/^table(_?)([^\n]*?)\.(?:[ \t](.+?))?\s*\n/,y=i.compile(/^(?:\|([~\^\-][:txattr:])\.\s*\n)?([:txattr:]\.[^\n\S]*)?\|(.*?)\|[^\n\S]*(\n|$)/,"s"),$=/^\|=([^\n+]*)\n/,S=/^\|:([^\n+]*)\|[\r\t ]*\n/,A=/^\|([\^\-~])([^\n+]*)\.[ \t\r]*\n/,L={"^":"thead","~":"tfoot","-":"tbody"};e.exports={parseColgroup:r,parseTable:a,testTable:s}}])});
//# sourceMappingURL=textile.min.js.map